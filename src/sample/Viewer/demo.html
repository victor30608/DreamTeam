<html>
<head>

    <meta
            name="viewport"
            content="initial-scale=1.0, width=device-width"
            charset="utf-8"
    />

    <script
            src="http://js.api.here.com/v3/3.0/mapsjs-core.js"
            type="text/javascript"
            charset="utf-8"
    ></script>
    <script
            src="http://js.api.here.com/v3/3.0/mapsjs-mapevents.js"
            type="text/javascript"
            charset="utf-8"
    ></script>
    <script
            src="http://js.api.here.com/v3/3.0/mapsjs-service.js"
            type="text/javascript"
            charset="utf-8"
    ></script>
    <script
            src="http://js.api.here.com/v3/3.0/mapsjs-ui.js"
            type="text/javascript"
            charset="utf-8"
    ></script>
    <script
            type="text/javascript"
            charset="UTF-8"
            src="http://js.api.here.com/v3/3.0/mapsjs-places.js"
    ></script>
    <link
            rel="stylesheet"
            type="text/css"
            href="http://js.api.here.com/v3/3.0/mapsjs-ui.css"
    />

</head>
<body>
<div id="mapContainer"></div>

<script type="text/javascript">
      var platform = new H.service.Platform({
   app_id: 'dm401Yashtsawoo3xcwe',
  app_code: 'o1BPH31eCiUNuIj8wWiVjw',
      });
      // Obtain the default map types from the platform object:
      var defaultLayers = platform.createDefaultLayers();
      // Instantiate (and display) a map object:
      var map = new H.Map(
        document.getElementById('mapContainer'),
        defaultLayers.normal.map,
        {
          zoom: 13,
          center: { lat: 55.9864196, lng: 37.1320735 }
        });
      // Enable the event system on the map instance:
      var mapEvents = new H.mapevents.MapEvents(map);
      // Instantiate the default behavior, providing the mapEvents object:
      var behavior = new H.mapevents.Behavior(mapEvents);
      var group = new H.map.Group();
      // Create the default UI components:
      var ui = H.ui.UI.createDefault(map, platform.createDefaultLayers());
      // Add the group object to the map:
      map.addObject(group);
      // Obtain a Search object through which to submit search
      // requests:
      var search = new H.places.Search(platform.getPlacesService()),
      	searchResult, error;
      // Define search parameters:
      var params = {
      	// Plain text search for places with the word "hotel"
      	// associated with them:
      	'q': 'post office',
      	//  Search in the Chinatown district in San Francisco:
      	'at': '55.9864196,37.1320735'
      };
      // Define a callback function to handle data on success:
      function onResult(data) {
      	addPlacesToMap(data.results);
      }
      // Define a callback function to handle errors:
      function onError(data) {
      	error = data;
      }
      // This function adds markers to the map, indicating each of
      // the located places:
      function addPlacesToMap(result) {
      	group.addObjects(result.items.map(function (place) {
			//debugger;
      		var marker = new H.map.Marker({lat: place.position[0],
      		lng: place.position[1]});
			marker.setData({'properties': {
				'title': place.title
			}});
      	return marker;
      	}));
      }
      // Run a search request with parameters, headers (empty), and
      // callback functions:
      function searcPost(lat, lng){
      	var params = {
      		// Plain text search for places with the word "hotel"
      		// associated with them:
      		'q': 'post office',
      		//  Search in the Chinatown district in San Francisco:
      		'at': lat.toString() + ',' +  lng.toString()
      	};
      	search.request(params, {}, onResult, onError);
      }
	//  group.addEventListener('tap', (ev) => {alert(ev.target.getData().properties.title)});
 group.addEventListener('tap', function (evt) {
    // event target is the marker itself, group is a parent event target
    // for all objects that it contains
    var bubble =  new H.ui.InfoBubble(evt.target.getPosition(), {
      // read custom data
      content: evt.target.getData().properties.title
    });
    // show info bubble
    ui.addBubble(bubble);
  }, false);
	 function movemap(lat,lng)
	 {
	  map.setCenter({lat:lat, lng:lng});
	 }
	 function customicon(lat,lng)
{
var svgMarkup = '<svg  width="30" height="30" xmlns="http://www.w3.org/2000/svg">' +
'<rect stroke="black" fill="${FILL}" x="1" y="1" width="22" height="22" />' +
'<text x="12" y="18" font-size="12pt" font-family="Arial" font-weight="bold" ' +
'text-anchor="middle" fill="${STROKE}" >Me</text></svg>';
var cubsIcon = new H.map.Icon(
svgMarkup.replace('${FILL}', 'red').replace('${STROKE}', 'white')),
cubsMarker = new H.map.Marker({lat: lat, lng: lng  },
{icon: cubsIcon});
map.addObject(cubsMarker);
}
    </script>
</body>
</html>v